- name: Add PAL.PROD.PAY.ALL
  # was PAL.PROD.HR.ALL
  vmware.ansible_for_nsxt.nsxt_policy_group:
    hostname: "{{NSXT_CREDENTIALS.wld_node}}"
    username: "{{NSXT_CREDENTIALS.username}}"
    password: "{{NSXT_CREDENTIALS.password}}"
    validate_certs: False
    display_name: "PAL.PROD.PAY.ALL"
    state: "present"
    domain_id: "default"
    expression:
          - member_type: "VirtualMachine"
            value: "env|PROD"
            key: "Tag"
            operator: "EQUALS"
            resource_type: "Condition"
          - conjunction_operator: "AND"
            resource_type: "ConjunctionOperator"
          - member_type: "VirtualMachine"
            value: "app|PAY"
            key: "Tag"
            operator: "EQUALS"
            resource_type: "Condition"
          - conjunction_operator: "AND"
            resource_type: "ConjunctionOperator"
          - member_type: "VirtualMachine"
            value: "site|PAL"
            key: "Tag"
            operator: "EQUALS"
            resource_type: "Condition"
  delegate_to: localhost
#- name: Add LON.PROD.HR.ALL
#  vmware.ansible_for_nsxt.nsxt_policy_group:
#    hostname: "{{NSXT_CREDENTIALS.wld_node}}"
#    username: "{{NSXT_CREDENTIALS.username}}"
#    password: "{{NSXT_CREDENTIALS.password}}"
#    validate_certs: False
#    display_name: "LON.PROD.HR.ALL"
#    state: "present"
#    domain_id: "default"
#    expression:
#          - member_type: "VirtualMachine"
#            value: "env|PROD"
#            key: "Tag"
#            operator: "EQUALS"
#            resource_type: "Condition"
#          - conjunction_operator: "AND"
#            resource_type: "ConjunctionOperator"
#          - member_type: "VirtualMachine"
#            value: "app|HR"
#            key: "Tag"
#            operator: "EQUALS"
#            resource_type: "Condition"
#          - conjunction_operator: "AND"
#            resource_type: "ConjunctionOperator"
#          - member_type: "VirtualMachine"
#            value: "site|LON"
#            key: "Tag"
#            operator: "EQUALS"
#            resource_type: "Condition"
#  delegate_to: localhost
- name: Add NY.PROD.RND.ALL
  # Was NY.PROD.FIN.ALL
  vmware.ansible_for_nsxt.nsxt_policy_group:
    hostname: "{{NSXT_CREDENTIALS.wld_node}}"
    username: "{{NSXT_CREDENTIALS.username}}"
    password: "{{NSXT_CREDENTIALS.password}}"
    validate_certs: False
    display_name: "NY.PROD.RND.ALL"
    state: "present"
    domain_id: "default"
    expression:
          - member_type: "VirtualMachine"
            value: "env|PROD"
            key: "Tag"
            operator: "EQUALS"
            resource_type: "Condition"
          - conjunction_operator: "AND"
            resource_type: "ConjunctionOperator"
          - member_type: "VirtualMachine"
            value: "app|RND"
            key: "Tag"
            operator: "EQUALS"
            resource_type: "Condition"
          - conjunction_operator: "AND"
            resource_type: "ConjunctionOperator"
          - member_type: "VirtualMachine"
            value: "site|NY"
            key: "Tag"
            operator: "EQUALS"
            resource_type: "Condition"
  delegate_to: localhost
- name: NY.STG.TOO.ALL
  # Was NY.STG.CRM.ALL
  vmware.ansible_for_nsxt.nsxt_policy_group:
    hostname: "{{NSXT_CREDENTIALS.wld_node}}"
    username: "{{NSXT_CREDENTIALS.username}}"
    password: "{{NSXT_CREDENTIALS.password}}"
    validate_certs: False
    display_name: "NY.STG.TOO.ALL"
    state: "present"
    domain_id: "default"
    expression:
          - member_type: "VirtualMachine"
            value: "env|STG"
            key: "Tag"
            operator: "EQUALS"
            resource_type: "Condition"
          - conjunction_operator: "AND"
            resource_type: "ConjunctionOperator"
          - member_type: "VirtualMachine"
            value: "app|TOO"
            key: "Tag"
            operator: "EQUALS"
            resource_type: "Condition"
          - conjunction_operator: "AND"
            resource_type: "ConjunctionOperator"
          - member_type: "VirtualMachine"
            value: "site|NYC"
            key: "Tag"
            operator: "EQUALS"
            resource_type: "Condition"
  delegate_to: localhost
- name: Add PAR.PROD.CRM.ALL
  vmware.ansible_for_nsxt.nsxt_policy_group:
    hostname: "{{NSXT_CREDENTIALS.wld_node}}"
    username: "{{NSXT_CREDENTIALS.username}}"
    password: "{{NSXT_CREDENTIALS.password}}"
    validate_certs: False
    display_name: "PAR.PROD.CRM.ALL"
    state: "present"
    domain_id: "default"
    expression:
          - member_type: "VirtualMachine"
            value: "env|PROD"
            key: "Tag"
            operator: "EQUALS"
            resource_type: "Condition"
          - conjunction_operator: "AND"
            resource_type: "ConjunctionOperator"
          - member_type: "VirtualMachine"
            value: "app|CRM"
            key: "Tag"
            operator: "EQUALS"
            resource_type: "Condition"
          - conjunction_operator: "AND"
            resource_type: "ConjunctionOperator"
          - member_type: "VirtualMachine"
            value: "site|PAR"
            key: "Tag"
            operator: "EQUALS"
            resource_type: "Condition"
  delegate_to: localhost
- name: Add PAR.PROD.LEG.ALL
  # was PAR.PROD.FIN.ALL
  vmware.ansible_for_nsxt.nsxt_policy_group:
    hostname: "{{NSXT_CREDENTIALS.wld_node}}"
    username: "{{NSXT_CREDENTIALS.username}}"
    password: "{{NSXT_CREDENTIALS.password}}"
    validate_certs: False
    display_name: "PAR.PROD.LEG.ALL"
    state: "present"
    domain_id: "default"
    expression:
          - member_type: "VirtualMachine"
            value: "env|PROD"
            key: "Tag"
            operator: "EQUALS"
            resource_type: "Condition"
          - conjunction_operator: "AND"
            resource_type: "ConjunctionOperator"
          - member_type: "VirtualMachine"
            value: "app|LEG"
            key: "Tag"
            operator: "EQUALS"
            resource_type: "Condition"
          - conjunction_operator: "AND"
            resource_type: "ConjunctionOperator"
          - member_type: "VirtualMachine"
            value: "site|PAR"
            key: "Tag"
            operator: "EQUALS"
            resource_type: "Condition"
  delegate_to: localhost