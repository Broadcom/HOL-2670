---
  - hosts: 127.0.0.1
    connection: local
    become: no
    vars_files:
      - environment.yml
    tasks:
      - name: Create Edge PG 1
        community.vmware.vmware_dvs_portgroup:
          hostname: '{{ vc_hostname }}'
          username: '{{ vc_username }}'
          password: '{{ vc_password }}'
          portgroup_name: '{{ edge_dpg1 }}'
          switch_name: '{{ vc_wld1_vds_name }}'
          vlan_trunk: true
          vlan_id: 0-4094
          port_binding: static
          port_allocation: elastic
          state: present
          validate_certs: no
          port_policy: 
            vendor_config_override: true
        delegate_to: localhost 
      
      - name: Create Edge PG 2
        community.vmware.vmware_dvs_portgroup:
          hostname: '{{ vc_hostname }}'
          username: '{{ vc_username }}'
          password: '{{ vc_password }}'
          portgroup_name: '{{ edge_dpg2 }}'
          switch_name: '{{ vc_wld1_vds_name }}'
          vlan_trunk: true
          vlan_id: 0-4094
          port_binding: static
          port_allocation: elastic
          state: present
          validate_certs: no
          port_policy: 
            vendor_config_override: true
        delegate_to: localhost
